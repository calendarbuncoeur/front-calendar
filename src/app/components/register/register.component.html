<div class="container mx-auto p-4 flex justify-center">
  <mat-card class="w-full max-w-lg">
    <mat-card-header>
      <mat-card-title>Inscription à l'événement</mat-card-title>
      <mat-card-subtitle>Veuillez remplir les champs ci-dessous.</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      @if (!success()) {
      <form [formGroup]="registrationForm()" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">
        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Prénom</mat-label>
          <input matInput formControlName="firstName" required />
          @if (registrationForm().get('firstName')?.hasError('required')) {
          <mat-error>Le prénom est requis.</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Nom</mat-label>
          <input matInput formControlName="lastName" required />
          @if (registrationForm().get('lastName')?.hasError('required')) {
          <mat-error>Le nom est requis.</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" type="email" />
          @if (registrationForm().get('email')?.hasError('email')) {
          <mat-error>Veuillez entrer une adresse email valide.</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Numéro de téléphone</mat-label>
          <input matInput formControlName="phoneNumber" />
          @if (registrationForm().get('phoneNumber')?.hasError('pattern')) {
          <mat-error>Veuillez entrer un numéro de téléphone valide.</mat-error>
          }
        </mat-form-field>

        @if (registrationForm().hasError('atLeastOne')) {
        <mat-error class="-mt-4 mb-2 text-center">Veuillez fournir un email ou un numéro de téléphone.</mat-error>
        }
      </form>
      }

      @if (message()) {
      <div class="p-4 mt-4 rounded-md" [ngClass]="success() ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'">
        {{ message() }}
      </div>
      }
    </mat-card-content>

    <mat-card-actions align="end">
      <a mat-button routerLink="/">Retour aux événements</a>
      @if (!success()) {
      <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="!registrationForm().valid">
        S'inscrire
      </button>
      }
    </mat-card-actions>
  </mat-card>
</div>
